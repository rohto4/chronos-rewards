# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¬ã‚¤ãƒ‰

Chronos Rewardsã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œæ‰‹é †

---

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã¨å ±é…¬è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆã®ç¨®é¡:**
1. **èªè¨¼ãƒ†ã‚¹ãƒˆ** - Supabaseæ¥ç¶šç¢ºèª
2. **å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆ** - ã‚³ã‚¤ãƒ³ãƒ»ã‚¯ãƒªã‚¹ã‚¿ãƒ«ãƒ»ã‚¹ã‚¿ãƒŸãƒŠã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯æ¤œè¨¼
3. **ã‚¿ã‚¹ã‚¯CRUDãƒ†ã‚¹ãƒˆ** - ã‚¿ã‚¹ã‚¯ã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãƒ»å®Œäº†ã®å‹•ä½œç¢ºèª
4. **ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†ãƒ†ã‚¹ãƒˆ** - ã‚¸ãƒ£ãƒ³ãƒ«ã®ä½œæˆãƒ»æ›´æ–°ãƒ»ä½¿ç”¨å›æ•°ç®¡ç†ã®ç¢ºèª

---

## ğŸš€ å‰ææ¡ä»¶

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€Supabaseæ¥ç¶šæƒ…å ±ã‚’è¨­å®šï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Supabase Dashboardã§`supabase-migration.sql`ã‚’å®Ÿè¡Œæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã€‚

---

## âœ… ãƒ†ã‚¹ãƒˆ1: èªè¨¼ãƒ†ã‚¹ãƒˆ

### ç›®çš„

- Supabaseæ¥ç¶šã®ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®å­˜åœ¨ç¢ºèª
- Row Level Security (RLS) ã®è¨­å®šç¢ºèª

### å®Ÿè¡Œæ–¹æ³•

```bash
npm run test:auth
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```
==================================================
  èªè¨¼ãƒ†ã‚¹ãƒˆé–‹å§‹
==================================================
â„¹ï¸  Test 1: Supabaseæ¥ç¶šãƒ†ã‚¹ãƒˆ
âœ… Supabaseæ¥ç¶šæˆåŠŸ
â„¹ï¸  Test 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ
âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæˆåŠŸï¼ˆuser_profilesãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèªï¼‰
â„¹ï¸  Test 3: å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ã®å­˜åœ¨ç¢ºèª
âœ… ãƒ†ãƒ¼ãƒ–ãƒ« tasks ç¢ºèªOK
âœ… ãƒ†ãƒ¼ãƒ–ãƒ« task_genres ç¢ºèªOK
âœ… ãƒ†ãƒ¼ãƒ–ãƒ« task_checklist ç¢ºèªOK
âœ… ãƒ†ãƒ¼ãƒ–ãƒ« reward_history ç¢ºèªOK
âœ… ãƒ†ãƒ¼ãƒ–ãƒ« stamina_history ç¢ºèªOK
âœ… å…¨ãƒ†ãƒ¼ãƒ–ãƒ«å­˜åœ¨ç¢ºèªå®Œäº†
â„¹ï¸  Test 4: Row Level Securityè¨­å®šç¢ºèª
âœ… RLSè¨­å®šæ­£å¸¸ï¼ˆèªè¨¼ãªã—ã§ã¯ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸å¯ï¼‰
â„¹ï¸  Test 5: ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
âœ… Supabase URL: https://xxxxxxxxxxxxx.supaba...
âœ… Anon Key: eyJhbGciOiJIUzI1NiIsInR...

==================================================
  èªè¨¼ãƒ†ã‚¹ãƒˆ - ãƒ†ã‚¹ãƒˆçµæœ
==================================================
âœ… æˆåŠŸ: 5
âŒ å¤±æ•—: 0
==================================================
```

### ã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å‡¦

**âŒ ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“**
â†’ `.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€Supabaseæ¥ç¶šæƒ…å ±ã‚’è¨­å®š

**âŒ ãƒ†ãƒ¼ãƒ–ãƒ« XXX ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“**
â†’ `supabase-migration.sql`ã‚’å®Ÿè¡Œ

**âŒ Supabaseæ¥ç¶šå¤±æ•—**
â†’ Supabase URLã¨Anon KeyãŒæ­£ã—ã„ã‹ç¢ºèª

---

## âœ… ãƒ†ã‚¹ãƒˆ2: å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆ

### ç›®çš„

- è©³ç´°åº¦è¨ˆç®—ï¼ˆ1-5æ®µéšï¼‰ã®æ¤œè¨¼
- ã‚³ã‚¤ãƒ³å ±é…¬è¨ˆç®—ã®æ¤œè¨¼
- ã‚¯ãƒªã‚¹ã‚¿ãƒ«å ±é…¬è¨ˆç®—ã®æ¤œè¨¼
- ã‚¹ã‚¿ãƒŸãƒŠæ¶ˆè²»ãƒ»å›å¾©è¨ˆç®—ã®æ¤œè¨¼

### å®Ÿè¡Œæ–¹æ³•

```bash
npm run test:rewards
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```
==================================================
  å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆé–‹å§‹
==================================================
â„¹ï¸  Test 1: è©³ç´°åº¦è¨ˆç®—ãƒ†ã‚¹ãƒˆ
âœ… è©³ç´°åº¦1: æœ€å°é™ã®ã‚¿ã‚¹ã‚¯ âœ“
âœ… è©³ç´°åº¦2: å†…å®¹ã‚ã‚Š âœ“
âœ… è©³ç´°åº¦5: å®Œå…¨ãªã‚¿ã‚¹ã‚¯ âœ“
â„¹ï¸  Test 2: ã‚³ã‚¤ãƒ³å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆ
âœ… åŸºæœ¬ã‚³ã‚¤ãƒ³: 10ã‚³ã‚¤ãƒ³ âœ“
âœ… è©³ç´°åº¦5: 20ã‚³ã‚¤ãƒ³ âœ“
âœ… è©³ç´°åº¦5+ãƒœãƒ¼ãƒŠã‚¹: 28ã‚³ã‚¤ãƒ³ âœ“
â„¹ï¸  Test 3: ã‚¯ãƒªã‚¹ã‚¿ãƒ«å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆ
âœ… 1æ™‚é–“ã‚¿ã‚¹ã‚¯: 5ã‚¯ãƒªã‚¹ã‚¿ãƒ« âœ“
âœ… 10æ™‚é–“ã‚¿ã‚¹ã‚¯+ãƒœãƒ¼ãƒŠã‚¹: 72ã‚¯ãƒªã‚¹ã‚¿ãƒ« âœ“
âœ… è¦ªã‚¿ã‚¹ã‚¯å®Œäº†ãƒœãƒ¼ãƒŠã‚¹: 216ã‚¯ãƒªã‚¹ã‚¿ãƒ« âœ“
â„¹ï¸  Test 4: ã‚¹ã‚¿ãƒŸãƒŠæ¶ˆè²»è¨ˆç®—ãƒ†ã‚¹ãƒˆ
âœ… åŸºæœ¬ã‚¿ã‚¹ã‚¯ä½œæˆ: 10ã‚¹ã‚¿ãƒŸãƒŠæ¶ˆè²» âœ“
âœ… è©³ç´°ã‚¿ã‚¹ã‚¯ä½œæˆ: 14ã‚¹ã‚¿ãƒŸãƒŠæ¶ˆè²» âœ“
âœ… ã‚¿ã‚¹ã‚¯ç·¨é›†: 5ã‚¹ã‚¿ãƒŸãƒŠæ¶ˆè²» âœ“
â„¹ï¸  Test 5: ã‚¹ã‚¿ãƒŸãƒŠå›å¾©è¨ˆç®—ãƒ†ã‚¹ãƒˆ
âœ… 1æ™‚é–“å›å¾©: 50 â†’ 60ã‚¹ã‚¿ãƒŸãƒŠ âœ“
âœ… 10æ™‚é–“å›å¾©ï¼ˆæº€ã‚¿ãƒ³ï¼‰: 0 â†’ 100ã‚¹ã‚¿ãƒŸãƒŠ âœ“
âœ… æœ€å¤§å€¤åˆ¶é™: 90 â†’ 100ã‚¹ã‚¿ãƒŸãƒŠ âœ“
â„¹ï¸  Test 6: ã‚¹ã‚¿ãƒŸãƒŠã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®šãƒ†ã‚¹ãƒˆ
âœ… ã‚¹ã‚¿ãƒŸãƒŠã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®š: low/medium/high âœ“
â„¹ï¸  Test 7: ç·¨é›†ãƒœãƒ¼ãƒŠã‚¹ã‚³ã‚¤ãƒ³è¨ˆç®—ãƒ†ã‚¹ãƒˆ
âœ… ç·¨é›†ãƒœãƒ¼ãƒŠã‚¹ï¼ˆ2â†’5ï¼‰: 15ã‚³ã‚¤ãƒ³ âœ“

==================================================
  å®Ÿä¾‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
==================================================
â„¹ï¸  ã‚·ãƒŠãƒªã‚ª: é•·æœŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¹ã‚¯ã®ä½œæˆã€œå®Œäº†
â„¹ï¸  è©³ç´°åº¦: 5/5
â„¹ï¸  ç²å¾—ã‚³ã‚¤ãƒ³: 28ã‚³ã‚¤ãƒ³
â„¹ï¸  å®Œäº†æ™‚ã‚¯ãƒªã‚¹ã‚¿ãƒ«: 144ã‚¯ãƒªã‚¹ã‚¿ãƒ«
â„¹ï¸  ã‚¹ã‚¿ãƒŸãƒŠæ¶ˆè²»: 14pt
âœ… ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†

==================================================
  å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆ - ãƒ†ã‚¹ãƒˆçµæœ
==================================================
âœ… æˆåŠŸ: 8
âŒ å¤±æ•—: 0
==================================================
```

### ã“ã®ãƒ†ã‚¹ãƒˆã§æ¤œè¨¼ã•ã‚Œã‚‹å†…å®¹

- **è©³ç´°åº¦1**: ã‚¿ã‚¤ãƒˆãƒ«ã®ã¿ â†’ 10ã‚³ã‚¤ãƒ³
- **è©³ç´°åº¦2**: ã‚¿ã‚¤ãƒˆãƒ«+å†…å®¹ â†’ 12ã‚³ã‚¤ãƒ³
- **è©³ç´°åº¦5**: å®Œå…¨ãªã‚¿ã‚¹ã‚¯ â†’ 28ã‚³ã‚¤ãƒ³ï¼ˆå‰ææ¡ä»¶ãƒ»ãƒ¡ãƒªãƒƒãƒˆãƒœãƒ¼ãƒŠã‚¹è¾¼ã¿ï¼‰
- **ã‚¯ãƒªã‚¹ã‚¿ãƒ«**: 1æ™‚é–“ = 5å€‹ã€10æ™‚é–“ = 50å€‹ã€è¦ªã‚¿ã‚¹ã‚¯å®Œäº† = 3å€
- **ã‚¹ã‚¿ãƒŸãƒŠ**: ä½œæˆ10ptã€ç·¨é›†5ptã€1æ™‚é–“ã§10ptå›å¾©

---

## âœ… ãƒ†ã‚¹ãƒˆ3: ã‚¿ã‚¹ã‚¯CRUDãƒ†ã‚¹ãƒˆ

### ç›®çš„

å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã€ã‚¿ã‚¹ã‚¯ã®CRUDæ“ä½œã‚’å®Ÿè¡Œã—ã€å‹•ä½œç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚

**âš ï¸ æ³¨æ„: å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ›¸ãè¾¼ã¿ã¾ã™**

### å‰ææ¡ä»¶

**Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿**ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•:
1. `npm run dev` ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•
2. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹
3. Google OAuthã§ãƒ­ã‚°ã‚¤ãƒ³
4. ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€ã“ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

### å®Ÿè¡Œæ–¹æ³•

```bash
npm run test:tasks
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```
==================================================
  ã‚¿ã‚¹ã‚¯CRUDãƒ†ã‚¹ãƒˆé–‹å§‹
==================================================
âš ï¸  ã“ã®ãƒ†ã‚¹ãƒˆã¯å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ›¸ãè¾¼ã¿ã¾ã™
âš ï¸  ãƒ†ã‚¹ãƒˆç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§å®Ÿè¡Œã—ã¦ãã ã•ã„

â„¹ï¸  Test 0: èªè¨¼çŠ¶æ…‹ç¢ºèª
âœ… èªè¨¼æ¸ˆã¿ ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: 12345678...
â„¹ï¸  Test 1: ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆ
âœ… ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆæˆåŠŸ ID: abcdefgh...
â„¹ï¸  Test 2: ã‚¿ã‚¹ã‚¯ä½œæˆ
âœ… ã‚¿ã‚¹ã‚¯ä½œæˆæˆåŠŸ ID: xyz12345...
â„¹ï¸  è©³ç´°åº¦: 3/5
â„¹ï¸  Test 3: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¿½åŠ 
âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¿½åŠ æˆåŠŸï¼ˆ3ä»¶ï¼‰
â„¹ï¸  Test 4: ã‚¿ã‚¹ã‚¯å–å¾—ï¼ˆã‚¸ãƒ£ãƒ³ãƒ«ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¾¼ã¿ï¼‰
âœ… ã‚¿ã‚¹ã‚¯å–å¾—æˆåŠŸ
â„¹ï¸  ã‚¿ã‚¤ãƒˆãƒ«: ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯
â„¹ï¸  ã‚¸ãƒ£ãƒ³ãƒ«: ãƒ†ã‚¹ãƒˆã‚¸ãƒ£ãƒ³ãƒ«
â„¹ï¸  ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ: 3ä»¶
â„¹ï¸  è©³ç´°åº¦: 5/5
â„¹ï¸  Test 5: ã‚¿ã‚¹ã‚¯æ›´æ–°
âœ… ã‚¿ã‚¹ã‚¯æ›´æ–°æˆåŠŸ
â„¹ï¸  æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«: ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯ï¼ˆæ›´æ–°æ¸ˆã¿ï¼‰
â„¹ï¸  æ–°ã—ã„é‡ã•: 10æ™‚é–“
â„¹ï¸  Test 6: ã‚¿ã‚¹ã‚¯å®Œäº†
âœ… ã‚¿ã‚¹ã‚¯å®Œäº†æˆåŠŸ
â„¹ï¸  å®Œäº†æ—¥æ™‚: 2026/01/31 20:00:00
â„¹ï¸  Test 7: å ±é…¬å±¥æ­´ç¢ºèª
âœ… å ±é…¬å±¥æ­´å–å¾—æˆåŠŸï¼ˆ2ä»¶ï¼‰
â„¹ï¸  1. ã‚³ã‚¤ãƒ³: 18å€‹ - ã‚¿ã‚¹ã‚¯ä½œæˆå ±é…¬
â„¹ï¸  2. ã‚¯ãƒªã‚¹ã‚¿ãƒ«: 120å€‹ - ã‚¿ã‚¹ã‚¯å®Œäº†å ±é…¬
â„¹ï¸  Test 8: ã‚¿ã‚¹ã‚¯å‰Šé™¤ï¼ˆè«–ç†å‰Šé™¤ï¼‰
âœ… ã‚¿ã‚¹ã‚¯å‰Šé™¤æˆåŠŸï¼ˆè«–ç†å‰Šé™¤ï¼‰
â„¹ï¸  å‰Šé™¤æ—¥æ™‚: 2026/01/31 20:00:01
â„¹ï¸  Test 9: å‰Šé™¤ç¢ºèª
âœ… å‰Šé™¤ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã¯å–å¾—ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ âœ“
â„¹ï¸  ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç‰©ç†å‰Šé™¤ä¸­...
âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†

==================================================
  ã‚¿ã‚¹ã‚¯CRUDãƒ†ã‚¹ãƒˆ - ãƒ†ã‚¹ãƒˆçµæœ
==================================================
âœ… æˆåŠŸ: 10
âŒ å¤±æ•—: 0
==================================================
```

### ã“ã®ãƒ†ã‚¹ãƒˆã§æ¤œè¨¼ã•ã‚Œã‚‹å†…å®¹

1. ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆ
2. ã‚¿ã‚¹ã‚¯ä½œæˆï¼ˆè©³ç´°åº¦3 â†’ ãƒˆãƒªã‚¬ãƒ¼ã§ã‚³ã‚¤ãƒ³ç²å¾—ï¼‰
3. ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¿½åŠ ï¼ˆè©³ç´°åº¦3â†’5ã«å‘ä¸Šï¼‰
4. ã‚¿ã‚¹ã‚¯å–å¾—ï¼ˆãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¾¼ã¿ï¼‰
5. ã‚¿ã‚¹ã‚¯æ›´æ–°
6. ã‚¿ã‚¹ã‚¯å®Œäº†ï¼ˆã‚¯ãƒªã‚¹ã‚¿ãƒ«ç²å¾—ï¼‰
7. å ±é…¬å±¥æ­´ã®è¨˜éŒ²
8. è«–ç†å‰Šé™¤
9. å‰Šé™¤å¾Œã®éè¡¨ç¤ºç¢ºèª
10. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆç‰©ç†å‰Šé™¤ï¼‰

### ã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å‡¦

**âŒ èªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“**
â†’ å…ˆã«ã‚¢ãƒ—ãƒªã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„

**âŒ ã‚¿ã‚¹ã‚¯ä½œæˆå¤±æ•—: ã‚¹ã‚¿ãƒŸãƒŠä¸è¶³**
â†’ ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¹ã‚¿ãƒŸãƒŠã‚’å›å¾©ã—ã¦ãã ã•ã„

---

## âœ… ãƒ†ã‚¹ãƒˆ4: ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†ãƒ†ã‚¹ãƒˆ

### ç›®çš„

ã‚¸ãƒ£ãƒ³ãƒ«ã®ä½œæˆãƒ»æ›´æ–°ãƒ»ä½¿ç”¨å›æ•°ç®¡ç†ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

**âš ï¸ æ³¨æ„: å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ›¸ãè¾¼ã¿ã¾ã™**

### å®Ÿè¡Œæ–¹æ³•

```bash
npm run test:genres
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```
==================================================
  ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†ãƒ†ã‚¹ãƒˆé–‹å§‹
==================================================
âš ï¸  ã“ã®ãƒ†ã‚¹ãƒˆã¯å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ›¸ãè¾¼ã¿ã¾ã™

â„¹ï¸  Test 0: èªè¨¼çŠ¶æ…‹ç¢ºèª
âœ… èªè¨¼æ¸ˆã¿ ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: 12345678...
â„¹ï¸  Test 1: ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆ
âœ… ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆ: ä»•äº‹ (#3B82F6)
âœ… ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆ: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ (#10B981)
âœ… ã‚¸ãƒ£ãƒ³ãƒ«ä½œæˆ: å‹‰å¼· (#8B5CF6)
â„¹ï¸  Test 2: ã‚¸ãƒ£ãƒ³ãƒ«ä¸€è¦§å–å¾—
âœ… ã‚¸ãƒ£ãƒ³ãƒ«å–å¾—æˆåŠŸï¼ˆ3ä»¶ï¼‰
â„¹ï¸  1. ä»•äº‹ - ä½¿ç”¨å›æ•°: 0å›
â„¹ï¸  2. ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ - ä½¿ç”¨å›æ•°: 0å›
â„¹ï¸  3. å‹‰å¼· - ä½¿ç”¨å›æ•°: 0å›
â„¹ï¸  Test 3: ã‚¸ãƒ£ãƒ³ãƒ«æ›´æ–°
âœ… ã‚¸ãƒ£ãƒ³ãƒ«æ›´æ–°æˆåŠŸ: ä»•äº‹ï¼ˆæ›´æ–°æ¸ˆã¿ï¼‰ (#EF4444)
â„¹ï¸  Test 4: ã‚¸ãƒ£ãƒ³ãƒ«ä½¿ç”¨å›æ•°ã®è‡ªå‹•æ›´æ–°ç¢ºèª
âœ… ä½¿ç”¨å›æ•°ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ: 1å›
â„¹ï¸  Test 5: ã‚¸ãƒ£ãƒ³ãƒ«åã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
âœ… é‡è¤‡ãƒã‚§ãƒƒã‚¯æ­£å¸¸: åŒã˜åå‰ã®ã‚¸ãƒ£ãƒ³ãƒ«ã¯ä½œæˆã§ãã¾ã›ã‚“ âœ“
â„¹ï¸  Test 6: ã‚¸ãƒ£ãƒ³ãƒ«ã‚«ãƒ©ãƒ¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
âœ… ã‚«ãƒ©ãƒ¼ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ­£å¸¸ âœ“
â„¹ï¸  ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ä¸­...
âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†ï¼ˆ3ä»¶å‰Šé™¤ï¼‰

==================================================
  ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†ãƒ†ã‚¹ãƒˆ - ãƒ†ã‚¹ãƒˆçµæœ
==================================================
âœ… æˆåŠŸ: 7
âŒ å¤±æ•—: 0
==================================================
```

---

## ğŸ”„ å…¨ãƒ†ã‚¹ãƒˆä¸€æ‹¬å®Ÿè¡Œ

ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’é †ç•ªã«å®Ÿè¡Œï¼š

```bash
npm run test:all
```

**å®Ÿè¡Œé †åº:**
1. èªè¨¼ãƒ†ã‚¹ãƒˆ
2. ã‚¿ã‚¹ã‚¯CRUDãƒ†ã‚¹ãƒˆ
3. å ±é…¬è¨ˆç®—ãƒ†ã‚¹ãƒˆ
4. ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†ãƒ†ã‚¹ãƒˆ

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: `Cannot find module 'dotenv'`

```bash
npm install
```

### ã‚¨ãƒ©ãƒ¼: `NEXT_PUBLIC_SUPABASE_URL is not defined`

`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```bash
cat .env.local
```

### ã‚¨ãƒ©ãƒ¼: `relation "tasks" does not exist`

Supabase Dashboardã§`supabase-migration.sql`ã‚’å®Ÿè¡Œï¼š

1. Supabase Dashboard > SQL Editor
2. `supabase-migration.sql`ã®å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘
3. "Run"ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¨ãƒ©ãƒ¼: `new row violates row-level security policy`

èªè¨¼ãŒå¿…è¦ãªãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ã‚¢ãƒ—ãƒªã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã®è§£é‡ˆ

### âœ… ã™ã¹ã¦æˆåŠŸã®å ´åˆ

```
==================================================
  XXXãƒ†ã‚¹ãƒˆ - ãƒ†ã‚¹ãƒˆçµæœ
==================================================
âœ… æˆåŠŸ: X
âŒ å¤±æ•—: 0
==================================================
```

â†’ å•é¡Œãªã—ã€‚æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚ã¾ã™ã€‚

### âŒ å¤±æ•—ãŒã‚ã‚‹å ´åˆ

```
==================================================
  XXXãƒ†ã‚¹ãƒˆ - ãƒ†ã‚¹ãƒˆçµæœ
==================================================
âœ… æˆåŠŸ: X
âŒ å¤±æ•—: 1
==================================================
```

â†’ ãƒ­ã‚°ã‚’ç¢ºèªã—ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¾“ã£ã¦å¯¾å‡¦ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãŸã‚‰ï¼š

1. **UIã®å®Ÿè£…** - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
2. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•** - `npm run dev`
3. **ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œç¢ºèª** - http://localhost:3000

---

## ğŸ“ è£œè¶³æƒ…å ±

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯è‡ªå‹•çš„ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ã¾ã™ãŒã€æ‰‹å‹•ã§å‰Šé™¤ã—ãŸã„å ´åˆï¼š

```sql
-- Supabase Dashboard > SQL Editor

-- ãƒ†ã‚¹ãƒˆã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤
DELETE FROM tasks WHERE title LIKE '%ãƒ†ã‚¹ãƒˆ%';

-- ãƒ†ã‚¹ãƒˆã‚¸ãƒ£ãƒ³ãƒ«ã‚’å‰Šé™¤
DELETE FROM task_genres WHERE name LIKE '%ãƒ†ã‚¹ãƒˆ%';
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆã®ä½œæˆ

`scripts/test-custom.ts`ã‚’ä½œæˆã—ã¦ã€ç‹¬è‡ªã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã§ãã¾ã™ã€‚

```typescript
import { createTestClient, log, printSummary } from './test-utils';

async function testCustom() {
  log.section('ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆé–‹å§‹');
  
  const results = { passed: 0, failed: 0 };
  const supabase = createTestClient();
  
  // ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°
  
  printSummary('ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆ', results);
}

testCustom();
```

å®Ÿè¡Œ:
```bash
npx tsx scripts/test-custom.ts
```

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [Supabase Documentation](https://supabase.com/docs)
- [Jest Documentation](https://jestjs.io/) (å°†æ¥çš„ãªE2Eãƒ†ã‚¹ãƒˆç”¨)
- [Vitest Documentation](https://vitest.dev/) (å°†æ¥çš„ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨)
